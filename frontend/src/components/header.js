import '../assets/css/header.css'
export default {
    target: 'header',
    data: {
        hasLogined: false,
    },
    methods: undefined,
    template: `
        <nav  class="card">
            <img class="logo" alt="CTF 2023">
            <h1>ZCTF</h1>

            <div id="links">
                <a href="#/home"><svg t="1697367416818" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1789"><path d="M468.906667 57.941333a68.394667 68.394667 0 0 1 86.165333 0l399.936 322.624c30.058667 24.234667 35.136 68.693333 11.328 99.328a69.269333 69.269333 0 0 1-37.802667 24.768l-3.712 0.810667 0.021334 361.514667c0 59.370667-44.48 108.48-102.528 113.877333l-4.736 0.362667-4.949334 0.106666H211.370667c-59.84 0-109.056-47.808-112.106667-109.312l-0.106667-5.034666-0.021333-361.514667-2.453333-0.490667c-29.696-6.848-52.16-33.088-53.909334-64.96L42.666667 436.010667c0-21.610667 9.685333-42.026667 26.325333-55.466667z m46.72 50.026667a5.76 5.76 0 0 0-7.253334 0L108.864 431.146667a6.058667 6.058667 0 0 0-2.218667 4.693333c0 3.328 2.624 6.016 5.866667 6.016h18.816c17.536-0.021333 31.744 14.506667 31.744 32.405333v392.533334l0.064 3.392C164.437333 896.533333 185.792 917.333333 211.712 917.333333h599.765333l3.328-0.085333c25.770667-1.322667 46.101333-23.146667 46.101334-49.621333V474.282667c0-17.92 14.208-32.426667 31.744-32.426667h18.816c1.792 0 3.477333-0.832 4.608-2.261333a6.101333 6.101333 0 0 0-0.96-8.426667z m138.133333 564.693333a32 32 0 0 1-3.754667 45.098667C610.858667 750.890667 568.106667 768 522.666667 768c-45.44 0-88.192-17.109333-127.36-50.24a32 32 0 1 1 41.386666-48.853333C464.704 692.650667 493.056 704 522.666667 704c29.589333 0 57.941333-11.349333 85.973333-35.093333a32 32 0 0 1 45.12 3.754666z" p-id="1790"></path></svg>首页</a>
                <a href="#/challenges"><svg t="1697368555023" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2267"><path d="M621.653333 96a32 32 0 0 1 0 64H257.578667A97.578667 97.578667 0 0 0 160 257.578667v508.842666a97.578667 97.578667 0 0 0 97.578667 97.578667h507.264a97.578667 97.578667 0 0 0 97.578666-97.152l1.578667-356.928a32 32 0 0 1 64 0.277333l-1.578667 356.928a161.578667 161.578667 0 0 1-161.578666 160.874667H257.578667A161.578667 161.578667 0 0 1 96 766.421333V257.578667A161.578667 161.578667 0 0 1 257.578667 96H621.653333z" fill="#111111" p-id="2268"></path><path d="M753.258667 113.557333L455.552 409.6a64 64 0 0 0-18.88 45.376v53.845333a67.242667 67.242667 0 0 0 65.770667 67.242667l50.986666 1.109333a64 64 0 0 0 45.738667-17.813333L902.826667 267.946667a107.946667 107.946667 0 0 0 3.242666-152.490667l-1.450666-1.493333a107.029333 107.029333 0 0 0-151.338667-0.426667z m106.538666 46.144a43.946667 43.946667 0 0 1-1.322666 62.08L554.88 513.194667l-51.008-1.130667a3.242667 3.242667 0 0 1-3.178667-3.242667v-53.845333L798.378667 158.933333a43.029333 43.029333 0 0 1 58.112-2.346666l3.306666 3.114666z" fill="#111111" p-id="2269"></path><path d="M772.330667 154.858667l94.677333 95.274666-45.397333 45.098667-94.677334-95.253333z" p-id="2270"></path></svg>题目</a>
                <a href="#/ranking"><svg t="1697370671686" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3593" ><path d="M224 800v160c0 35.3-28.7 64-64 64H8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h136c8.8 0 16-7.2 16-16v-16c0-8.8-7.2-16-16-16H8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h136c8.8 0 16-7.2 16-16v-16c0-8.8-7.2-16-16-16H8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152c35.3 0 64 28.7 64 64zM160 64v216c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V80c0-8.8-7.2-16-16-16H40c-4.4 0-8-3.6-8-8V8c0-4.4 3.6-8 8-8h56c35.3 0 64 28.7 64 64zM64 560v16c0 8.8 7.2 16 16 16h136c4.4 0 8 3.6 8 8v48c0 4.4-3.6 8-8 8H64c-35.3 0-64-28.7-64-64v-48c0-35.3 28.7-64 64-64h80c8.8 0 16-7.2 16-16v-16c0-8.8-7.2-16-16-16H8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152c35.3 0 64 28.7 64 64v48c0 35.3-28.7 64-64 64H80c-8.8 0-16 7.2-16 16zM992 176H320c-17.7 0-32-14.3-32-32s14.3-32 32-32h672c17.7 0 32 14.3 32 32s-14.3 32-32 32zM992 544H320c-17.7 0-32-14.3-32-32s14.3-32 32-32h672c17.7 0 32 14.3 32 32s-14.3 32-32 32zM992 912H320c-17.7 0-32-14.3-32-32s14.3-32 32-32h672c17.7 0 32 14.3 32 32s-14.3 32-32 32z" p-id="3594"></path></svg>排名</a>
            </div>

            <a href="#/login" id='login' class="button">登录</a>
            <label class="icon-burger">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </label>
            <label class="userinfo">
            <svg t="1697424088082" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9281" ><path d="M511.333 63.333c-247.424 0-448 200.576-448 448s200.576 448 448 448 448-200.576 448-448-200.576-448-448-448z m0 832c-51.868 0-102.15-10.144-149.451-30.15-36.011-15.231-69.123-35.67-98.812-60.897 12.177-31.985 42.226-63.875 84.223-88.903C396.189 686.243 456.222 669.53 512 669.53c55.631 0 115.416 16.658 164.026 45.703 41.762 24.953 71.689 56.812 83.863 88.804-29.764 25.342-62.976 45.865-99.106 61.146-47.299 20.006-97.582 30.15-149.45 30.15z m296.268-139.658c-20.493-35.937-54.353-68.855-98.747-95.381C649.75 624.979 579.839 605.53 512 605.53c-67.964 0-138.094 19.488-197.471 54.875-44.644 26.606-78.656 59.594-99.195 95.586-23.835-28.755-43.234-60.652-57.85-95.208-20.006-47.3-30.15-97.583-30.15-149.451s10.144-102.15 30.15-149.451c19.337-45.719 47.034-86.792 82.321-122.078 35.286-35.287 76.359-62.983 122.078-82.321 47.3-20.006 97.583-30.15 149.451-30.15 51.868 0 102.15 10.144 149.451 30.15 45.719 19.337 86.792 47.034 122.078 82.321 35.287 35.286 62.983 76.359 82.321 122.078 20.006 47.3 30.15 97.583 30.15 149.451s-10.144 102.15-30.15 149.451c-14.563 34.429-33.869 66.22-57.583 94.892z" fill="" p-id="9282"></path><path d="M512 220.223c-88.224 0-160 71.776-160 160s71.776 160 160 160c88.225 0 160-71.775 160-160s-71.775-160-160-160z m0 256c-52.935 0-96-43.065-96-96s43.065-96 96-96 96 43.065 96 96-43.065 96-96 96z" p-id="9283"></path></svg>
                用户设置
            </label>
        </nav>

        <div id="dropdown">
            <div class="switcher">
                <a href="#/home"><svg t="1697367416818" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1789"><path d="M468.906667 57.941333a68.394667 68.394667 0 0 1 86.165333 0l399.936 322.624c30.058667 24.234667 35.136 68.693333 11.328 99.328a69.269333 69.269333 0 0 1-37.802667 24.768l-3.712 0.810667 0.021334 361.514667c0 59.370667-44.48 108.48-102.528 113.877333l-4.736 0.362667-4.949334 0.106666H211.370667c-59.84 0-109.056-47.808-112.106667-109.312l-0.106667-5.034666-0.021333-361.514667-2.453333-0.490667c-29.696-6.848-52.16-33.088-53.909334-64.96L42.666667 436.010667c0-21.610667 9.685333-42.026667 26.325333-55.466667z m46.72 50.026667a5.76 5.76 0 0 0-7.253334 0L108.864 431.146667a6.058667 6.058667 0 0 0-2.218667 4.693333c0 3.328 2.624 6.016 5.866667 6.016h18.816c17.536-0.021333 31.744 14.506667 31.744 32.405333v392.533334l0.064 3.392C164.437333 896.533333 185.792 917.333333 211.712 917.333333h599.765333l3.328-0.085333c25.770667-1.322667 46.101333-23.146667 46.101334-49.621333V474.282667c0-17.92 14.208-32.426667 31.744-32.426667h18.816c1.792 0 3.477333-0.832 4.608-2.261333a6.101333 6.101333 0 0 0-0.96-8.426667z m138.133333 564.693333a32 32 0 0 1-3.754667 45.098667C610.858667 750.890667 568.106667 768 522.666667 768c-45.44 0-88.192-17.109333-127.36-50.24a32 32 0 1 1 41.386666-48.853333C464.704 692.650667 493.056 704 522.666667 704c29.589333 0 57.941333-11.349333 85.973333-35.093333a32 32 0 0 1 45.12 3.754666z" p-id="1790"></path></svg>首页</a>
                <a href="#/challenges"><svg t="1697368555023" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2267"><path d="M621.653333 96a32 32 0 0 1 0 64H257.578667A97.578667 97.578667 0 0 0 160 257.578667v508.842666a97.578667 97.578667 0 0 0 97.578667 97.578667h507.264a97.578667 97.578667 0 0 0 97.578666-97.152l1.578667-356.928a32 32 0 0 1 64 0.277333l-1.578667 356.928a161.578667 161.578667 0 0 1-161.578666 160.874667H257.578667A161.578667 161.578667 0 0 1 96 766.421333V257.578667A161.578667 161.578667 0 0 1 257.578667 96H621.653333z" fill="#111111" p-id="2268"></path><path d="M753.258667 113.557333L455.552 409.6a64 64 0 0 0-18.88 45.376v53.845333a67.242667 67.242667 0 0 0 65.770667 67.242667l50.986666 1.109333a64 64 0 0 0 45.738667-17.813333L902.826667 267.946667a107.946667 107.946667 0 0 0 3.242666-152.490667l-1.450666-1.493333a107.029333 107.029333 0 0 0-151.338667-0.426667z m106.538666 46.144a43.946667 43.946667 0 0 1-1.322666 62.08L554.88 513.194667l-51.008-1.130667a3.242667 3.242667 0 0 1-3.178667-3.242667v-53.845333L798.378667 158.933333a43.029333 43.029333 0 0 1 58.112-2.346666l3.306666 3.114666z" fill="#111111" p-id="2269"></path><path d="M772.330667 154.858667l94.677333 95.274666-45.397333 45.098667-94.677334-95.253333z" p-id="2270"></path></svg>题目</a>
                <a href="#/ranking"><svg t="1697370671686" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3593"><path d="M224 800v160c0 35.3-28.7 64-64 64H8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h136c8.8 0 16-7.2 16-16v-16c0-8.8-7.2-16-16-16H8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h136c8.8 0 16-7.2 16-16v-16c0-8.8-7.2-16-16-16H8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152c35.3 0 64 28.7 64 64zM160 64v216c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V80c0-8.8-7.2-16-16-16H40c-4.4 0-8-3.6-8-8V8c0-4.4 3.6-8 8-8h56c35.3 0 64 28.7 64 64zM64 560v16c0 8.8 7.2 16 16 16h136c4.4 0 8 3.6 8 8v48c0 4.4-3.6 8-8 8H64c-35.3 0-64-28.7-64-64v-48c0-35.3 28.7-64 64-64h80c8.8 0 16-7.2 16-16v-16c0-8.8-7.2-16-16-16H8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152c35.3 0 64 28.7 64 64v48c0 35.3-28.7 64-64 64H80c-8.8 0-16 7.2-16 16zM992 176H320c-17.7 0-32-14.3-32-32s14.3-32 32-32h672c17.7 0 32 14.3 32 32s-14.3 32-32 32zM992 544H320c-17.7 0-32-14.3-32-32s14.3-32 32-32h672c17.7 0 32 14.3 32 32s-14.3 32-32 32zM992 912H320c-17.7 0-32-14.3-32-32s14.3-32 32-32h672c17.7 0 32 14.3 32 32s-14.3 32-32 32z" p-id="3594"></path></svg>排名</a>
                <div class="hr"></div>
            </div>
            <div class="info">
                <a href="#"><svg t="1697419471813" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1789"><path d="M512 74.666667c241.536 0 437.333333 195.797333 437.333333 437.333333S753.536 949.333333 512 949.333333 74.666667 753.536 74.666667 512 270.464 74.666667 512 74.666667z m0 64C305.813333 138.666667 138.666667 305.813333 138.666667 512S305.813333 885.333333 512 885.333333 885.333333 718.186667 885.333333 512 718.186667 138.666667 512 138.666667z m138.666667 170.666666a32 32 0 0 1 31.850666 28.928L682.666667 341.333333v106.666667a32 32 0 0 1-63.850667 3.072L618.666667 448v-106.666667a32 32 0 0 1 32-32z m-277.333334 0a32 32 0 0 1 31.850667 28.928L405.333333 341.333333v106.666667a32 32 0 0 1-63.850666 3.072L341.333333 448v-106.666667a32 32 0 0 1 32-32z" p-id="1790"></path></svg>个人信息</a>
                <a href="#"><svg t="1697421069022" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5692"><path d="M1023.99 809.836l-108.009-0.054-0.02-0.085c-0.974 0.096-1.961 0.147-2.961 0.147a30 30 0 0 1-0.322-59.992h47.341c-18.8-95.582-77.685-160.041-160.835-198.257a40.5 40.5 0 0 1-9.2-71.911l0.022-0.153a172.4 172.4 0 0 0 61-131.692c0-95.542-77.677-172.994-173.5-172.994q-2.147 0-4.278 0.054l-0.124-0.08c-0.368 0.013-0.736 0.028-1.107 0.028a30 30 0 0 1 0-60c0.547 0 1.09 0.017 1.63 0.046-0.092-0.107-0.173-0.217-0.267-0.324 1.36-0.023 2.718-0.055 4.084-0.055 128.964 0 233.51 104.414 233.51 233.215a232.349 232.349 0 0 1-70.1 166.573c106.565 56.722 178.916 167.62 183.136 295.534z m-278.033-362.11a232.349 232.349 0 0 1-70.1 166.573c106.563 56.725 180.1 167.2 184.322 295.193H164.716c4.226-127.995 77.759-238.468 184.321-295.193a232.352 232.352 0 0 1-70.1-166.573c0-128.8 104.546-233.215 233.51-233.215s233.51 104.414 233.51 233.215z m-516.08 402.123h565.14c-19.08-97.031-79.461-162.01-164.617-200-34.419 21.273-73 31.09-117.953 31.09s-84.44-9.817-118.859-31.09c-85.156 37.995-144.631 102.969-163.711 200z m282.632-575.005c-95.819 0-173.5 77.452-173.5 172.994s77.677 172.995 173.5 172.995 173.5-77.453 173.5-172.995-77.681-172.994-173.5-172.994zM352 175.158c-0.371 0-0.739-0.015-1.107-0.028l-0.124 0.08q-2.133-0.051-4.278-0.054c-95.819 0-173.5 77.414-173.5 172.909a172.281 172.281 0 0 0 61 131.627l0.022 0.152a40.473 40.473 0 0 1-9.2 71.876c-83.15 38.2-142.04 102.624-160.835 198.158H111.319a29.983 29.983 0 0 1-0.319 59.966c-1 0-1.987-0.051-2.961-0.147l-0.02 0.085-108.01 0.054c4.224-127.85 76.572-238.692 183.135-295.392a232.177 232.177 0 0 1-70.1-166.49c0-128.738 104.546-233.1 233.51-233.1 1.366 0 2.724 0.032 4.084 0.055-0.094 0.106-0.175 0.216-0.267 0.323 0.54-0.029 1.083-0.045 1.63-0.045a29.986 29.986 0 1 1-0.001 59.971z" p-id="5693"></path></svg>战队管理</a>
                <a href="#" class="logout"><svg t="1697377859786" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6250" ><path d="M626.624 738.432L861.12 503.936 626.512 269.328l-56.56 56.56L708.032 464H384v80h323.92l-137.856 137.872 56.56 56.56zM288 208h368V128H208v752h448v-80H288V208z" p-id="6251"></path></svg>登出</a>
                <div class="hr"></div>
                <a class="darkmode-toggler"><svg t="1697422125554" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17444"><path d="M512 0C229.2 0 0 229.2 0 512c0 272 212.1 494.5 480 511 10.6 0.7 21.3 1 32 1s21.4-0.3 32-1c267.9-16.5 480-239 480-511C1024 229.2 794.8 0 512 0z m-32 941.4c0 9.5-8.3 17-17.8 15.9-42.9-4.7-84.7-15.6-124.6-32.5-53.3-22.6-101.3-54.9-142.4-96-41.2-41.2-73.5-89.1-96-142.4C75.8 631.2 64 572.5 64 512s11.8-119.2 35.2-174.4c22.6-53.3 54.9-101.3 96-142.4 41.2-41.2 89.1-73.5 142.4-96 39.9-16.9 81.7-27.8 124.6-32.5 9.5-1 17.8 6.4 17.8 15.9v858.8z" p-id="17445"></path></svg>切换深浅色主题</a>
            </div>
        </div>
    `,
    beforeMount: function() {
        return this.template
    },
    afterMount: function() {
        //Load images
        import('../assets/images/logo.png').then(logo => {
            document.querySelectorAll('.logo').forEach(img => img.src=logo.default)
        })

        //Add event listener
        const dropdown = document.getElementById('dropdown')
        const header = document.querySelector('header')

        document.querySelectorAll('nav>label').forEach((item) => {
            item.addEventListener('click', () =>{
                header.classList.toggle('show-toggler')
            })
        })
        document.querySelector('.darkmode-toggler').addEventListener('click', ()=>{
            const mode = document.body.dataset.theme === 'dark' ? '': 'dark'
            document.body.dataset.theme = mode
            localStorage.setItem('zctf-darkmode', mode)
        })
        document.addEventListener('click', (e) => {
            if (e.target.tagName === 'LABEL') {
                return
            }
            if (dropdown.contains(e.target)){
                return
            }
            if (header.classList.contains('show-toggler')){
                header.classList.remove('show-toggler')
            }
        })

        document.getElementById('login').addEventListener('click', () => {
            location.hash = 'login'
        })
        
        document.querySelector('.logout').addEventListener('click', () => {
            localStorage.removeItem('zctf')
        })

        return null
    },
    destroyed: undefined,
}